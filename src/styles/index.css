@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Accessibility Improvements */
@layer base {
  /* Base dark mode styles */
  html {
    @apply transition-colors duration-200;
  }

  html.dark {
    @apply bg-gray-900 text-gray-100;
    color-scheme: dark;
  }

  body {
    @apply bg-white text-gray-900 transition-colors duration-200;
    @apply dark:bg-gray-900 dark:text-gray-100;
  }

  /* Improved focus indicators for better accessibility */
  *:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }

  /* Custom focus styles for interactive elements */
  button:focus,
  input:focus,
  select:focus,
  textarea:focus,
  [role="button"]:focus,
  [role="tab"]:focus,
  [role="menuitem"]:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
  }

  /* High contrast focus for dark theme */
  .dark *:focus {
    outline-color: #60a5fa;
    box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.3);
  }

  /* Dark mode text improvements */
  .dark h1, .dark h2, .dark h3, .dark h4, .dark h5, .dark h6 {
    @apply text-gray-50;
  }

  .dark p {
    @apply text-gray-200;
  }

  .dark a {
    @apply text-blue-400 hover:text-blue-300;
  }

  /* Dark mode background improvements */
  .dark .bg-white {
    @apply bg-gray-800;
  }

  .dark .bg-gray-50 {
    @apply bg-gray-800;
  }

  .dark .bg-gray-100 {
    @apply bg-gray-700;
  }

  .dark .bg-gray-200 {
    @apply bg-gray-600;
  }

  /* Dark mode border improvements */
  .dark .border-gray-200 {
    @apply border-gray-600;
  }

  .dark .border-gray-300 {
    @apply border-gray-500;
  }

  /* Dark mode shadow improvements */
  .dark .shadow-sm {
    @apply shadow-dark-soft;
  }

  .dark .shadow {
    @apply shadow-dark-medium;
  }

  .dark .shadow-lg {
    @apply shadow-dark-strong;
  }

  /* Additional dark mode improvements */
  .dark .bg-blue-50 {
    @apply bg-blue-900/20;
  }

  .dark .bg-green-50 {
    @apply bg-green-900/20;
  }

  .dark .bg-red-50 {
    @apply bg-red-900/20;
  }

  .dark .bg-yellow-50 {
    @apply bg-yellow-900/20;
  }

  .dark .text-blue-600 {
    @apply text-blue-400;
  }

  .dark .text-green-600 {
    @apply text-green-400;
  }

  .dark .text-red-600 {
    @apply text-red-400;
  }

  .dark .text-yellow-600 {
    @apply text-yellow-400;
  }

  /* Dark mode scrollbar improvements */
  .dark ::-webkit-scrollbar-track {
    background: #1e293b;
  }

  .dark ::-webkit-scrollbar-thumb {
    background: #475569;
    border-color: #1e293b;
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: #64748b;
  }

  /* Dark mode selection improvements */
  .dark ::selection {
    background-color: #3b82f6;
    color: #ffffff;
  }

  .dark ::-moz-selection {
    background-color: #3b82f6;
    color: #ffffff;
  }

  /* Dark mode form improvements */
  .dark input::placeholder,
  .dark textarea::placeholder {
    color: #9ca3af;
  }

  .dark input:disabled,
  .dark textarea:disabled,
  .dark select:disabled {
    background-color: #374151;
    color: #9ca3af;
  }

  /* Dark mode link improvements */
  .dark a:not(.btn-accessible):hover {
    color: #60a5fa;
  }

  /* Dark mode code improvements */
  .dark code {
    background-color: #374151;
    color: #e5e7eb;
  }

  .dark pre {
    background-color: #1f2937;
    color: #e5e7eb;
  }

  /* Skip link for keyboard navigation */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: #3b82f6;
    color: white;
    padding: 8px;
    text-decoration: none;
    border-radius: 4px;
    z-index: 10000;
  }

  .skip-link:focus {
    top: 6px;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .bg-gray-100 { background-color: #000000 !important; }
    .bg-gray-200 { background-color: #000000 !important; }
    .bg-gray-300 { background-color: #000000 !important; }
    .bg-gray-400 { background-color: #000000 !important; }
    .bg-gray-500 { background-color: #000000 !important; }
    .bg-gray-600 { background-color: #000000 !important; }
    .bg-gray-700 { background-color: #000000 !important; }
    .bg-gray-800 { background-color: #000000 !important; }
    
    .text-gray-100 { color: #ffffff !important; }
    .text-gray-200 { color: #ffffff !important; }
    .text-gray-300 { color: #ffffff !important; }
    .text-gray-400 { color: #ffffff !important; }
    .text-gray-500 { color: #ffffff !important; }
    .text-gray-600 { color: #ffffff !important; }
    .text-gray-700 { color: #ffffff !important; }
    .text-gray-800 { color: #ffffff !important; }
    .text-gray-900 { color: #ffffff !important; }
  }

  /* Screen reader only text */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Focus visible utility */
  .focus-visible:focus:not(:focus-visible) {
    outline: none;
    box-shadow: none;
  }

  /* Improved button focus states */
  .btn:focus-visible {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
  }

  /* Better link focus states */
  a:focus-visible {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
    text-decoration: underline;
  }

  /* Improved form control focus states */
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
    border-color: #3b82f6;
  }

  /* Custom scrollbar for better visibility */
  ::-webkit-scrollbar {
    width: 12px;
    height: 12px;
  }

  ::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 6px;
  }

  ::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 6px;
    border: 2px solid #f1f5f9;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }

  .dark ::-webkit-scrollbar-track {
    background: #1e293b;
  }

  .dark ::-webkit-scrollbar-thumb {
    background: #475569;
    border-color: #1e293b;
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: #64748b;
  }
}

@layer components {
  /* Enhanced button component with accessibility */
  .btn-accessible {
    @apply inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    @apply hover:scale-105 active:scale-95;
  }

  /* Enhanced card component with accessibility */
  .card-accessible {
    @apply bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700;
    @apply focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2;
    @apply transition-all duration-200;
  }

  /* Enhanced input component with accessibility */
  .input-accessible {
    @apply w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg;
    @apply bg-white dark:bg-gray-700 text-gray-900 dark:text-white;
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
    @apply placeholder-gray-500 dark:placeholder-gray-400;
    @apply transition-colors duration-200;
  }

  /* Enhanced dropdown component with accessibility */
  .dropdown-accessible {
    @apply absolute z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg;
    @apply focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2;
    @apply transition-all duration-200;
  }

  /* Enhanced table component with accessibility */
  .table-accessible {
    @apply w-full border-collapse;
  }

  .table-accessible th {
    @apply px-4 py-2 text-left font-semibold text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600;
  }

  .table-accessible td {
    @apply px-4 py-2 border-b border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300;
  }

  .table-accessible tr:hover {
    @apply bg-gray-50 dark:bg-gray-700/50;
  }

  /* Enhanced navigation component with accessibility */
  .nav-accessible {
    @apply flex items-center space-x-1;
  }

  .nav-accessible a,
  .nav-accessible button {
    @apply px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
    @apply hover:bg-gray-100 dark:hover:bg-gray-700;
  }

  .nav-accessible a[aria-current="page"],
  .nav-accessible button[aria-current="page"] {
    @apply bg-blue-500 text-white;
  }

  /* Enhanced progress bar component with accessibility */
  .progress-accessible {
    @apply w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2;
    @apply focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2;
  }

  .progress-accessible-bar {
    @apply h-2 rounded-full transition-all duration-300;
    @apply bg-blue-500;
  }

  /* Enhanced toggle component with accessibility */
  .toggle-accessible {
    @apply relative inline-flex h-6 w-11 items-center rounded-full;
    @apply bg-gray-200 dark:bg-gray-700 transition-colors duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
  }

  .toggle-accessible.enabled {
    @apply bg-blue-500;
  }

  .toggle-accessible-thumb {
    @apply inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200;
    @apply translate-x-1;
  }

  .toggle-accessible.enabled .toggle-accessible-thumb {
    @apply translate-x-6;
  }
}

@layer utilities {
  /* Accessibility utilities */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
  }

  .focus-ring-white {
    @apply focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800;
  }

  .focus-ring-dark {
    @apply focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-gray-800;
  }

  .sr-only-focusable:not(:focus) {
    @apply sr-only;
  }

  .sr-only-focusable:focus {
    @apply static w-auto h-auto p-0 m-0 overflow-visible whitespace-normal border-0;
  }

  /* High contrast utilities */
  .high-contrast {
    @apply border-2 border-black dark:border-white;
  }

  .high-contrast-text {
    @apply text-black dark:text-white;
  }

  /* Motion utilities */
  .motion-safe {
    @apply transition-all duration-200;
  }

  .motion-reduce {
    @apply transition-none duration-0;
  }

  /* Focus utilities */
  .focus-visible-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2;
  }

  .focus-visible-ring-white {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-gray-800;
  }

  /* Dark mode specific utilities */
  .dark-mode-bg {
    @apply bg-white dark:bg-gray-800;
  }

  .dark-mode-bg-secondary {
    @apply bg-gray-50 dark:bg-gray-700;
  }

  .dark-mode-bg-tertiary {
    @apply bg-gray-100 dark:bg-gray-600;
  }

  .dark-mode-text {
    @apply text-gray-900 dark:text-gray-100;
  }

  .dark-mode-text-secondary {
    @apply text-gray-700 dark:text-gray-300;
  }

  .dark-mode-text-muted {
    @apply text-gray-500 dark:text-gray-400;
  }

  .dark-mode-border {
    @apply border-gray-200 dark:border-gray-600;
  }

  .dark-mode-border-secondary {
    @apply border-gray-300 dark:border-gray-500;
  }

  .dark-mode-shadow {
    @apply shadow-sm dark:shadow-dark-soft;
  }

  .dark-mode-shadow-medium {
    @apply shadow dark:shadow-dark-medium;
  }

  .dark-mode-shadow-large {
    @apply shadow-lg dark:shadow-dark-strong;
  }

  /* Dark mode color overrides for better contrast */
  .dark-mode-success {
    @apply text-green-600 dark:text-green-400;
  }

  .dark-mode-danger {
    @apply text-red-600 dark:text-red-400;
  }

  .dark-mode-warning {
    @apply text-yellow-600 dark:text-yellow-400;
  }

  .dark-mode-info {
    @apply text-blue-600 dark:text-blue-400;
  }

  /* Dark mode background color overrides */
  .dark-mode-bg-success {
    @apply bg-green-50 dark:bg-green-900/20;
  }

  .dark-mode-bg-danger {
    @apply bg-red-50 dark:bg-red-900/20;
  }

  .dark-mode-bg-warning {
    @apply bg-yellow-50 dark:bg-yellow-900/20;
  }

  .dark-mode-bg-info {
    @apply bg-blue-50 dark:bg-blue-900/20;
  }

  /* Responsive spacing utilities */
  .px-responsive {
    @apply px-0.5 sm:px-1 md:px-1.5 lg:px-2 xl:px-2.5 2xl:px-3;
  }

  .py-responsive {
    @apply py-4 sm:py-6 md:py-8 lg:py-10 xl:py-12;
  }

  .pt-responsive {
    @apply pt-4 sm:pt-6 md:pt-8 lg:pt-10 xl:pt-12;
  }

  .pb-responsive {
    @apply pb-4 sm:pb-6 md:pb-8 lg:pb-10 xl:pb-12;
  }

  .space-y-responsive {
    @apply space-y-4 sm:space-y-6 md:space-y-8 lg:space-y-10;
  }

  /* Additional responsive margin utilities for consistent app spacing */
  .mx-responsive {
    @apply mx-0.5 sm:mx-1 md:mx-1.5 lg:mx-2 xl:mx-2.5 2xl:mx-3;
  }

  /* Additional responsive margin utilities for consistent app spacing */
  .ml-responsive {
    @apply ml-0.5 sm:ml-1 md:ml-1.5 lg:ml-2 xl:ml-2.5 2xl:ml-3;
  }

  .mr-responsive {
    @apply mr-0.5 sm:mr-1 md:mr-1.5 lg:mr-2 xl:mr-2.5 2xl:mr-3;
  }

  /* Container utilities for consistent app margins */
  .container-responsive {
    @apply mx-auto px-0.5 sm:px-1 md:px-1.5 lg:px-2 xl:px-2.5 2xl:px-3 max-w-7xl;
  }

  .container-fluid {
    @apply mx-auto px-0.5 sm:px-1 md:px-1.5 lg:px-2 xl:px-2.5 2xl:px-3;
  }

  /* Page content margins */
  .page-content {
    @apply mx-auto px-0.5 sm:px-1 md:px-1.5 lg:px-2 xl:px-2.5 2xl:px-3;
  }

  /* Section margins */
  .section-margin {
    @apply mx-0.5 sm:mx-1 md:mx-1.5 lg:mx-2 xl:mx-2.5 2xl:mx-3;
  }

  /* Component margins */
  .component-margin {
    @apply mx-0.5 sm:mx-1 md:mx-1.5 lg:mx-2 xl:mx-2.5;
  }
}

/* Custom animations with reduced motion support */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideDown {
  from { transform: translateY(-10px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(10px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes scaleIn {
  from { transform: scale(0.95); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

.animate-slide-down {
  animation: slideDown 0.3s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out;
}

/* Reduced motion support for animations */
@media (prefers-reduced-motion: reduce) {
  .animate-fade-in,
  .animate-slide-down,
  .animate-slide-up,
  .animate-scale-in {
    animation: none;
  }
}

/* High contrast mode overrides */
@media (prefers-contrast: high) {
  .animate-fade-in,
  .animate-slide-down,
  .animate-slide-up,
  .animate-scale-in {
    animation: none;
  }
  
  .transition-all,
  .transition-colors,
  .transition-transform {
    transition: none !important;
  }
}

/* Print styles for better accessibility */
@media print {
  .no-print {
    display: none !important;
  }
  
  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  a[href]:after {
    content: " (" attr(href) ")";
  }
  
  abbr[title]:after {
    content: " (" attr(title) ")";
  }
}

  /* Ensure the dropdown is above all other elements */
  .z-\[99999\] {
    z-index: 99999 !important;
  }

  /* Fix for dropdown overflow issues */
  .dropdown-container {
    @apply relative;
    overflow: visible !important;
  }

  .dropdown-menu {
    @apply absolute z-[99999] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg;
    @apply transition-all duration-200;
    overflow: visible !important;
    white-space: nowrap;
    min-width: 16rem;
    max-width: 20rem;
  }

  /* Ensure dropdown items are fully visible */
  .dropdown-item {
    @apply w-full text-left px-4 py-3 transition-all duration-200 flex items-center space-x-3 rounded-lg mx-2 hover:scale-105;
    @apply text-neutral-700 hover:bg-primary-50 hover:text-primary-700;
    white-space: nowrap;
    overflow: visible;
  }

  .dark .dropdown-item {
    @apply text-dark-text-secondary hover:bg-dark-bg-accent/80 hover:text-dark-text-primary;
  }

  /* Global overflow fixes for dropdown containers */
  .container-fluid,
  .pt-2,
  .pb-responsive,
  .space-y-responsive {
    overflow: visible !important;
  }

  /* Additional fixes for dropdown positioning */
  .dropdown-container .absolute {
    position: absolute !important;
    z-index: 99999 !important;
    overflow: visible !important;
    clip: auto !important;
    clip-path: none !important;
  }

  /* Ensure dropdown text is not truncated */
  .dropdown-container button span {
    white-space: nowrap;
    overflow: visible;
    text-overflow: clip;
  }

  /* Fix for any parent container overflow issues */
  .relative.inline-block {
    overflow: visible !important;
  }

  /* Ensure header dropdowns are not constrained */
  header,
  .header-container,
  nav {
    overflow: visible !important;
  }